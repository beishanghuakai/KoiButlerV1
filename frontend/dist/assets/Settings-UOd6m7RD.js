import{_ as D}from"./_plugin-vue_export-helper-DRcqrMy4.js";/* empty css                   *//* empty css                *//* empty css                             *//* empty css                     *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 */import{a4 as m,d as R,r as v,o as Y,x as E,ah as G,ai as h,e as V,g as t,w as a,a8 as N,aM as F,aN as $,E as q,m as j,n as H,f as p,k as S,aO as z,aP as J,s as r,P as Q,O as W,au as X,q as Z,aw as ee,av as le,j as b,ax as te}from"./index-Bf3lHhEM.js";const A={getAll:()=>m.get("/settings").then(n=>n.data),get:n=>m.get(`/settings/${n}`).then(o=>o.data),set:(n,o)=>m.put(`/settings/${n}`,{value:o}).then(l=>l.data),batchSet:n=>m.post("/settings",{settings:n}).then(o=>o.data),delete:n=>m.delete(`/settings/${n}`).then(o=>o.data)},ae={class:"settings-page"},oe={style:{width:"100%"}},se={class:"about-section"},ne=R({__name:"Settings",setup(n){const o={BASE_URL:"ai_base_url",API_KEY:"ai_api_key",MODEL:"ai_model",SYSTEM_PROMPT:"ai_system_prompt"},l=v({apiKey:"",baseUrl:"https://api.openai.com/v1",model:"gpt-4o-mini",customModel:"",systemPrompt:"你是一个闲鱼卖家助手，帮助回复买家的咨询。请保持友好、专业的态度。"}),f=v(!1),c=v(!1),d=v(!1),P=[{value:"gpt-4o-mini",label:"GPT-4o Mini"},{value:"gpt-4o",label:"GPT-4o"},{value:"gpt-4-turbo",label:"GPT-4 Turbo"},{value:"gpt-3.5-turbo",label:"GPT-3.5 Turbo"},{value:"claude-3-5-sonnet-20241022",label:"Claude 3.5 Sonnet"},{value:"claude-3-5-haiku-20241022",label:"Claude 3.5 Haiku"},{value:"deepseek-chat",label:"DeepSeek Chat"},{value:"qwen-turbo",label:"通义千问 Turbo"}];Y(()=>{T()});async function T(){f.value=!0;try{const e=(await A.getAll()).settings||{};l.value.apiKey=e[o.API_KEY]||"",l.value.baseUrl=e[o.BASE_URL]||"https://api.openai.com/v1",l.value.systemPrompt=e[o.SYSTEM_PROMPT]||l.value.systemPrompt;const u=e[o.MODEL]||"gpt-4o-mini";P.some(_=>_.value===u)?(l.value.model=u,d.value=!1):(l.value.customModel=u,d.value=!0)}catch{E.error("获取设置失败")}finally{f.value=!1}}async function I(){c.value=!0;try{const g=d.value?l.value.customModel:l.value.model;await A.batchSet({[o.API_KEY]:l.value.apiKey,[o.BASE_URL]:l.value.baseUrl,[o.MODEL]:g,[o.SYSTEM_PROMPT]:l.value.systemPrompt}),E.success("保存成功")}catch{E.error("保存失败")}finally{c.value=!1}}return(g,e)=>{const u=H,i=j,_=J,w=z,k=te,U=X,x=Z,K=q,M=$,y=le,O=ee,B=F,L=N,C=h;return G((b(),V("div",ae,[t(L,null,{header:a(()=>[...e[6]||(e[6]=[p("span",{class:"title"},"系统设置",-1)])]),default:a(()=>[t(B,null,{default:a(()=>[t(M,{label:"AI 设置"},{default:a(()=>[t(K,{"label-width":"120px",style:{"max-width":"600px"}},{default:a(()=>[t(i,{label:"API Key"},{default:a(()=>[t(u,{modelValue:l.value.apiKey,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.apiKey=s),type:"password","show-password":"",placeholder:"请输入 API Key"},null,8,["modelValue"])]),_:1}),t(i,{label:"API 地址"},{default:a(()=>[t(u,{modelValue:l.value.baseUrl,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.baseUrl=s),placeholder:"https://api.openai.com/v1"},null,8,["modelValue"]),e[7]||(e[7]=p("div",{class:"form-tip"},"支持 OpenAI 兼容的 API 地址（如 DeepSeek、通义千问等）",-1))]),_:1}),t(i,{label:"模型选择"},{default:a(()=>[p("div",oe,[t(w,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=s=>d.value=s),style:{"margin-bottom":"12px"}},{default:a(()=>[t(_,{value:!1},{default:a(()=>[...e[8]||(e[8]=[r("预设模型",-1)])]),_:1}),t(_,{value:!0},{default:a(()=>[...e[9]||(e[9]=[r("自定义模型",-1)])]),_:1})]),_:1},8,["modelValue"]),d.value?(b(),S(u,{key:1,modelValue:l.value.customModel,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.customModel=s),placeholder:"输入模型名称，如 gpt-4o、claude-3-opus-20240229"},null,8,["modelValue"])):(b(),S(U,{key:0,modelValue:l.value.model,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.model=s),style:{width:"100%"},placeholder:"选择模型"},{default:a(()=>[(b(),V(Q,null,W(P,s=>t(k,{key:s.value,label:s.label,value:s.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]))])]),_:1}),t(i,{label:"系统提示词"},{default:a(()=>[t(u,{modelValue:l.value.systemPrompt,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.systemPrompt=s),type:"textarea",rows:4,placeholder:"设置 AI 的角色和行为"},null,8,["modelValue"])]),_:1}),t(i,null,{default:a(()=>[t(x,{type:"primary",onClick:I,loading:c.value},{default:a(()=>[...e[10]||(e[10]=[r(" 保存设置 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),t(M,{label:"关于"},{default:a(()=>[p("div",se,[e[14]||(e[14]=p("h3",null,"Koi Butler",-1)),e[15]||(e[15]=p("p",null,"锦鲤管家 - 闲鱼自动化助手",-1)),t(O,{column:1,border:"",style:{"margin-top":"20px"}},{default:a(()=>[t(y,{label:"版本"},{default:a(()=>[...e[11]||(e[11]=[r("1.0.0",-1)])]),_:1}),t(y,{label:"技术栈"},{default:a(()=>[...e[12]||(e[12]=[r("Go + Vue 3 + Element Plus",-1)])]),_:1}),t(y,{label:"开源协议"},{default:a(()=>[...e[13]||(e[13]=[r("MIT License",-1)])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})])),[[C,f.value]])}}}),ge=D(ne,[["__scopeId","data-v-e6fb319a"]]);export{ge as default};
