import{_ as H}from"./_plugin-vue_export-helper-DRcqrMy4.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                             *//* empty css                *//* empty css                 *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";/* empty css                     *//* empty css                        *//* empty css               *//* empty css                        *//* empty css                  *//* empty css                  */import{u as J}from"./account-B7d52lTG.js";import{u as K}from"./order-CdwFPHR-.js";import{d as Q,r as b,c as R,o as W,e as w,g as l,w as t,a8 as X,ag as Y,ah as Z,k as m,l as T,ai as ee,T as d,ac as te,ak as le,f as p,t as o,as as ae,ae as oe,s,aj as se,q as ne,at as ie,ao as re,ab as de,af as ue,au as ce,P as I,O as S,ap as _e,av as pe,aw as me,ar as fe,x as D,j as c,ax as ve}from"./index-Bf3lHhEM.js";const be={0:"获取中",1:"待付款",2:"待发货",3:"待收货",4:"交易成功",6:"已关闭"},ge={class:"orders-page"},he={class:"card-header"},ye={class:"actions"},ke={class:"order-id"},Ee={class:"item-cell"},we={class:"item-title"},Te={class:"price"},Ve={class:"price"},xe=Q({__name:"Orders",setup(Oe){const u=K(),g=J(),h=b(""),f=b(""),y=b(!1),n=b(null),N=R(()=>Object.entries(be).map(([i,a])=>({value:Number(i),label:a})));W(()=>{u.fetchOrders(),g.fetchAccounts()});function V(){u.fetchOrders({accountId:h.value||void 0,status:f.value!==""?f.value:void 0})}function B(i){n.value=i,y.value=!0}async function U(i){try{await fe.confirm("确定删除此订单记录？","确认删除",{type:"warning"}),await u.deleteOrder(i),D.success("删除成功")}catch(a){a!=="cancel"&&D.error("删除失败")}}function x(i){return{1:"warning",2:"primary",3:"info",4:"success",6:"danger"}[i]||"info"}function M(i){const a=g.accounts.find(v=>v.id===i);return(a==null?void 0:a.nickname)||(a==null?void 0:a.remark)||i.slice(0,8)}return(i,a)=>{const v=ve,O=ce,k=ne,E=le,_=te,A=ae,C=oe,P=se,j=de,$=ue,z=X,r=pe,F=me,L=Y,q=ee;return c(),w("div",ge,[l(z,null,{header:t(()=>[p("div",he,[a[5]||(a[5]=p("span",{class:"title"},"订单管理",-1)),p("div",ye,[l(O,{modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=e=>h.value=e),placeholder:"筛选账号",clearable:"",style:{width:"180px"},onChange:V},{default:t(()=>[(c(!0),w(I,null,S(d(g).accounts,e=>(c(),m(v,{key:e.id,label:e.nickname||e.id.slice(0,8),value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(O,{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=e=>f.value=e),placeholder:"筛选状态",clearable:"",style:{width:"120px"},onChange:V},{default:t(()=>[(c(!0),w(I,null,S(N.value,e=>(c(),m(v,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(k,{icon:d(_e),onClick:a[2]||(a[2]=e=>d(u).fetchOrders()),loading:d(u).loading},{default:t(()=>[...a[4]||(a[4]=[s(" 刷新 ",-1)])]),_:1},8,["icon","loading"])])])]),default:t(()=>[Z((c(),m(j,{data:d(u).orders,stripe:""},{default:t(()=>[l(_,{label:"订单号",width:"160"},{default:t(({row:e})=>[l(E,{content:e.orderId,placement:"top"},{default:t(()=>[p("span",ke,o(e.orderId.slice(-12)),1)]),_:2},1032,["content"])]),_:1}),l(_,{label:"商品","min-width":"200"},{default:t(({row:e})=>[p("div",Ee,[e.itemPicUrl?(c(),m(A,{key:0,src:e.itemPicUrl,"preview-src-list":[e.itemPicUrl],fit:"cover",class:"item-image"},null,8,["src","preview-src-list"])):T("",!0),p("span",we,o(e.itemTitle||"-"),1)])]),_:1}),l(_,{label:"金额",width:"100"},{default:t(({row:e})=>[p("span",Te,"¥"+o(e.price||"0.00"),1)]),_:1}),l(_,{label:"状态",width:"100",align:"center"},{default:t(({row:e})=>[l(C,{type:x(e.status),size:"small"},{default:t(()=>[s(o(e.statusText),1)]),_:2},1032,["type"])]),_:1}),l(_,{label:"买家",width:"120"},{default:t(({row:e})=>[s(o(e.buyerNickname||"-"),1)]),_:1}),l(_,{label:"账号",width:"120"},{default:t(({row:e})=>[s(o(M(e.accountId)),1)]),_:1}),l(_,{label:"下单时间",width:"160"},{default:t(({row:e})=>[s(o(e.orderTime),1)]),_:1}),l(_,{label:"操作",width:"120",align:"center",fixed:"right"},{default:t(({row:e})=>[l(P,null,{default:t(()=>[l(E,{content:"查看详情"},{default:t(()=>[l(k,{icon:d(ie),onClick:G=>B(e)},null,8,["icon","onClick"])]),_:2},1024),l(E,{content:"删除"},{default:t(()=>[l(k,{icon:d(re),type:"danger",onClick:G=>U(e.orderId)},null,8,["icon","onClick"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[q,d(u).loading]]),!d(u).loading&&d(u).orders.length===0?(c(),m($,{key:0,description:"暂无订单"})):T("",!0)]),_:1}),l(L,{modelValue:y.value,"onUpdate:modelValue":a[3]||(a[3]=e=>y.value=e),title:"订单详情",width:"600px"},{default:t(()=>[n.value?(c(),m(F,{key:0,column:2,border:""},{default:t(()=>[l(r,{label:"订单号",span:2},{default:t(()=>[s(o(n.value.orderId),1)]),_:1}),l(r,{label:"商品名称",span:2},{default:t(()=>[s(o(n.value.itemTitle||"-"),1)]),_:1}),l(r,{label:"订单金额"},{default:t(()=>[p("span",Ve,"¥"+o(n.value.price||"0.00"),1)]),_:1}),l(r,{label:"订单状态"},{default:t(()=>[l(C,{type:x(n.value.status),size:"small"},{default:t(()=>[s(o(n.value.statusText),1)]),_:1},8,["type"])]),_:1}),l(r,{label:"买家昵称"},{default:t(()=>[s(o(n.value.buyerNickname||"-"),1)]),_:1}),l(r,{label:"买家ID"},{default:t(()=>[s(o(n.value.buyerUserId||"-"),1)]),_:1}),l(r,{label:"下单时间"},{default:t(()=>[s(o(n.value.orderTime),1)]),_:1}),l(r,{label:"付款时间"},{default:t(()=>[s(o(n.value.payTime||"-"),1)]),_:1}),l(r,{label:"发货时间"},{default:t(()=>[s(o(n.value.shipTime||"-"),1)]),_:1}),l(r,{label:"完成时间"},{default:t(()=>[s(o(n.value.completeTime||"-"),1)]),_:1})]),_:1})):T("",!0)]),_:1},8,["modelValue"])])}}}),Je=H(xe,[["__scopeId","data-v-765d4d64"]]);export{Je as default};
