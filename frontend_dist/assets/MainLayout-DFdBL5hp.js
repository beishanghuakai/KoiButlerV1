import{_ as j}from"./_plugin-vue_export-helper-DRcqrMy4.js";/* empty css                  *//* empty css                        *//* empty css                     *//* empty css                   */import"./el-tooltip-l0sNRNKZ.js";import{d as q,u as G,r as v,c as b,y as J,z as V,A as O,B as P,C as Q,D as X,F as Y,G as Z,H as ee,I as te,J as ae,K as oe,o as ne,L as le,k as l,w as e,M as se,l as B,g as a,N as ue,f as i,e as f,O as D,P as I,Q as ie,R as de,S as re,q as ce,T as d,U as _e,V as pe,W as fe,X as me,Y as ve,t as h,Z as he,_ as we,s as L,$ as ye,a0 as ge,a1 as ke,i as Ee,j as o,a2 as xe,a3 as S}from"./index-Bf3lHhEM.js";const Me={class:"logo"},Ce={key:0},be={key:1},Ve={class:"header-right"},Be={class:"user-info"},De={class:"username"},Ie=q({__name:"MainLayout",setup(Le){const w=Ee(),N=oe(),_=G(),s=v(!1),u=v(!1),r=v(!1),z=[{path:"/dashboard",title:"仪表盘",icon:J},{path:"/accounts",title:"账号管理",icon:V},{path:"/orders",title:"订单管理",icon:O},{path:"/goods",title:"商品管理",icon:P},{path:"/conversations",title:"会话管理",icon:Q},{path:"/autoreply",title:"自动回复",icon:X},{path:"/autosell",title:"自动发货",icon:Y},{path:"/workflow",title:"工作流",icon:Z},{path:"/logs",title:"系统日志",icon:ee},{path:"/settings",title:"系统设置",icon:te}],y=b(()=>{const c=[...z];return _.isAdmin&&c.push({path:"/users",title:"用户管理",icon:ae}),c}),g=b(()=>N.path);function k(c){w.push(c),u.value&&(r.value=!1)}function A(){_.logout(),w.push("/login")}function m(){u.value=window.innerWidth<768,u.value||(r.value=!1)}return ne(()=>{_.fetchCurrentUser(),m(),window.addEventListener("resize",m)}),le(()=>{window.removeEventListener("resize",m)}),(c,n)=>{const p=ve,E=xe,x=ie,K=ue,U=de,M=ce,R=we,$=he,F=me,H=re,T=ke("router-view"),W=ge,C=se;return o(),l(C,{class:"layout-container"},{default:e(()=>[u.value?B("",!0):(o(),l(K,{key:0,width:s.value?"64px":"220px",class:"layout-aside"},{default:e(()=>[i("div",Me,[s.value?(o(),f("span",be,"K")):(o(),f("span",Ce,"Koi Butler"))]),a(x,{"default-active":g.value,collapse:s.value,"collapse-transition":!1,class:"layout-menu",onSelect:k},{default:e(()=>[(o(!0),f(I,null,D(y.value,t=>(o(),l(E,{key:t.path,index:t.path},{title:e(()=>[L(h(t.title),1)]),default:e(()=>[a(p,null,{default:e(()=>[(o(),l(S(t.icon)))]),_:2},1024)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active","collapse"])]),_:1},8,["width"])),u.value?(o(),l(U,{key:1,modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=t=>r.value=t),direction:"ltr",size:240,"show-close":!1,class:"mobile-drawer"},{header:e(()=>[...n[3]||(n[3]=[i("div",{class:"drawer-header"},"Koi Butler",-1)])]),default:e(()=>[a(x,{"default-active":g.value,class:"drawer-menu",onSelect:k},{default:e(()=>[(o(!0),f(I,null,D(y.value,t=>(o(),l(E,{key:t.path,index:t.path},{default:e(()=>[a(p,null,{default:e(()=>[(o(),l(S(t.icon)))]),_:2},1024),i("span",null,h(t.title),1)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active"])]),_:1},8,["modelValue"])):B("",!0),a(C,null,{default:e(()=>[a(H,{class:"layout-header"},{default:e(()=>[u.value?(o(),l(M,{key:0,icon:d(_e),text:"",onClick:n[1]||(n[1]=t=>r.value=!0)},null,8,["icon"])):(o(),l(M,{key:1,icon:s.value?d(pe):d(fe),text:"",onClick:n[2]||(n[2]=t=>s.value=!s.value)},null,8,["icon"])),i("div",Ve,[a(F,{trigger:"click"},{dropdown:e(()=>[a($,null,{default:e(()=>[a(R,{onClick:A},{default:e(()=>[a(p,null,{default:e(()=>[a(d(ye))]),_:1}),n[4]||(n[4]=L(" 退出登录 ",-1))]),_:1})]),_:1})]),default:e(()=>{var t;return[i("span",Be,[a(p,null,{default:e(()=>[a(d(V))]),_:1}),i("span",De,h(((t=d(_).user)==null?void 0:t.username)||"用户"),1)])]}),_:1})])]),_:1}),a(W,{class:"layout-main"},{default:e(()=>[a(T)]),_:1})]),_:1})]),_:1})}}}),$e=j(Ie,[["__scopeId","data-v-e20cfbd5"]]);export{$e as default};
