import{_ as U}from"./_plugin-vue_export-helper-DRcqrMy4.js";/* empty css                   *//* empty css                *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                 *//* empty css                        *//* empty css                  */import{g as D}from"./goods-Bcbnfspn.js";import{u as L}from"./account-B7d52lTG.js";import{d as M,r as d,o as O,x as j,e as n,g as i,w as l,a8 as q,ah as F,k as f,l as _,ai as H,P as C,O as E,af as J,ay as K,f as s,au as Q,T as x,q as R,ap as W,s as y,j as o,as as X,ae as Y,t as g,ax as Z}from"./index-Bf3lHhEM.js";const $={class:"goods-page"},ee={class:"card-header"},te={class:"actions"},oe={class:"goods-grid"},ae={class:"goods-image"},se={class:"goods-info"},ne=["title"],le={class:"goods-price"},ie={class:"goods-meta"},ce={key:0,class:"account-name"},re={key:1,class:"pagination"},de=M({__name:"Goods",setup(ue){const h=L(),m=d([]),c=d(!1),u=d(""),v=d(0),r=d(1);O(async()=>{await h.fetchAccounts(),p()});async function p(){c.value=!0;try{const a={page:r.value};u.value&&(a.accountId=u.value);const t=await D.list(a);m.value=t.items||[],v.value=t.totalCount||0}catch{j.error("获取商品列表失败")}finally{c.value=!1}}function S(){r.value=1,p()}function V(a){r.value=a,p()}function w(a){return a===0?"在售":"已下架"}function N(a){return a===0?"success":"info"}return(a,t)=>{const A=Z,B=Q,P=R,T=X,k=Y,b=J,z=K,I=q,G=H;return o(),n("div",$,[i(I,null,{header:l(()=>[s("div",ee,[t[3]||(t[3]=s("span",{class:"title"},"商品管理",-1)),s("div",te,[i(B,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),placeholder:"全部账号",clearable:"",style:{width:"200px"},onChange:S},{default:l(()=>[(o(!0),n(C,null,E(x(h).accounts,e=>(o(),f(A,{key:e.id,label:e.nickname||e.id,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),i(P,{icon:x(W),onClick:p,loading:c.value},{default:l(()=>[...t[2]||(t[2]=[y("刷新",-1)])]),_:1},8,["icon","loading"])])])]),default:l(()=>[F((o(),n("div",oe,[(o(!0),n(C,null,E(m.value,e=>(o(),n("div",{key:e.id,class:"goods-item"},[s("div",ae,[i(T,{src:e.picUrl,fit:"cover",lazy:""},{error:l(()=>[...t[4]||(t[4]=[s("div",{class:"image-placeholder"},"暂无图片",-1)])]),_:1},8,["src"]),e.hasVideo?(o(),f(k,{key:0,class:"video-tag",size:"small",type:"warning"},{default:l(()=>[...t[5]||(t[5]=[y("视频",-1)])]),_:1})):_("",!0)]),s("div",se,[s("div",{class:"goods-title",title:e.title},g(e.title),9,ne),s("div",le,"¥"+g(e.price),1),s("div",ie,[i(k,{type:N(e.itemStatus),size:"small"},{default:l(()=>[y(g(w(e.itemStatus)),1)]),_:2},1032,["type"]),e.accountNickname?(o(),n("span",ce,g(e.accountNickname),1)):_("",!0)])])]))),128))])),[[G,c.value]]),!c.value&&m.value.length===0?(o(),f(b,{key:0,description:"暂无商品"})):_("",!0),v.value>20?(o(),n("div",re,[i(z,{"current-page":r.value,"onUpdate:currentPage":t[1]||(t[1]=e=>r.value=e),"page-size":20,total:v.value,layout:"prev, pager, next",onCurrentChange:V},null,8,["current-page","total"])])):_("",!0)]),_:1})])}}}),we=U(de,[["__scopeId","data-v-75d22125"]]);export{we as default};
